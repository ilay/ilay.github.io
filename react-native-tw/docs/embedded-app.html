<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>React Native | 基於 React 框架建構你的原生 APP</title>
    <meta name="viewport" content="width=device-width">
    <meta property="og:title" content="React Native | 基於 REACT 框架建構你的原生 APP">
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://ilay.github.io/react-native-tw/index.html">
    <meta property="og:image" content="http://ilay.github.io/react-native-tw/img/opengraph.png">
    <meta property="og:description" content="基於 REACT 框架建構你的原生 APP">
    <link rel="shortcut icon" href="../img/favicon.png">
    <link rel="stylesheet" href="../css/react-native.css">
    <script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script>
    <script type="text/javascript">
        try {
            Typekit.load();
        } catch (e) {}
    </script>
</head>

<body>
    <div class="container">
        <div class="nav-main">
            <div class="wrap">
                <a class="nav-home" href="../index.html"><img src="../img/header_logo.png">React Native</a>
                <div class="nav-site-wrapper">
                    <ul class="nav-site nav-site-internal">
                        <li><a href="getting-started.html" class="active">文件</a></li>
                        <li><a href="../support.html" class="">支援</a></li>
                    </ul>
                    <ul class="nav-site nav-site-external">
                        <li><a href="https://github.com/facebook/react-native" class="">GitHub</a></li>
                        <li><a href="http://ilay.github.io/react-tw" class="">React</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <section class="content wrap documentationContent">
            <div class="nav-docs">
                <div class="nav-docs-section">
                    <h3>Quick Start</h3>
                    <ul>
                        <li><a style="margin-left:0;" class="" href="getting-started.html#content">Getting Started</a></li>
                        <li><a style="margin-left:0;" class="" href="tutorial.html#content">Tutorial</a></li>
                        <li><a style="margin-left:0;" class="" href="videos.html#content">Videos</a></li>
                    </ul>
                </div>
                <div class="nav-docs-section">
                    <h3>Guides</h3>
                    <ul>
                        <li><a style="margin-left:0;" class="" href="style.html#content">Style</a></li>
                        <li><a style="margin-left:0;" class="" href="gesture-responder-system.html#content">Gesture Responder System</a></li>
                        <li><a style="margin-left:0;" class="" href="nativemodulesios.html#content">Native Modules (iOS)</a></li>
                        <li><a style="margin-left:0;" class="" href="nativecomponentsios.html#content">Native UI Components (iOS)</a></li>
                        <li><a style="margin-left:0;" class="" href="linking-libraries.html#content">Linking Libraries</a></li>
                        <li><a style="margin-left:0;" class="" href="debugging.html#content">Debugging</a></li>
                        <li><a style="margin-left:0;" class="" href="testing.html#content">Testing</a></li>
                        <li><a style="margin-left:0;" class="" href="runningondevice.html#content">Running On Device</a></li>
                        <li><a style="margin-left:0;" class="active" href="embedded-app.html#content">Integration with Existing App</a></li>
                        <li><a style="margin-left:0;" class="" href="javascript-environment.html#content">JavaScript Environment</a></li>
                    </ul>
                </div>
                <div class="nav-docs-section">
                    <h3>components</h3>
                    <ul>
                        <li><a style="margin-left:0;" class="" href="activityindicatorios.html#content">ActivityIndicatorIOS</a></li>
                        <li><a style="margin-left:0;" class="" href="datepickerios.html#content">DatePickerIOS</a></li>
                        <li><a style="margin-left:0;" class="" href="image.html#content">Image</a></li>
                        <li><a style="margin-left:0;" class="" href="listview.html#content">ListView</a></li>
                        <li><a style="margin-left:0;" class="" href="mapview.html#content">MapView</a></li>
                        <li><a style="margin-left:0;" class="" href="navigator.html#content">Navigator</a></li>
                        <li><a style="margin-left:0;" class="" href="navigatorios.html#content">NavigatorIOS</a></li>
                        <li><a style="margin-left:0;" class="" href="pickerios.html#content">PickerIOS</a></li>
                        <li><a style="margin-left:0;" class="" href="scrollview.html#content">ScrollView</a></li>
                        <li><a style="margin-left:0;" class="" href="segmentedcontrolios.html#content">SegmentedControlIOS</a></li>
                        <li><a style="margin-left:0;" class="" href="sliderios.html#content">SliderIOS</a></li>
                        <li><a style="margin-left:0;" class="" href="switchios.html#content">SwitchIOS</a></li>
                        <li><a style="margin-left:0;" class="" href="tabbarios.html#content">TabBarIOS</a></li>
                        <li><a style="margin-left:0;" class="" href="tabbarios-item.html#content">TabBarIOS.Item</a></li>
                        <li><a style="margin-left:0;" class="" href="text.html#content">Text</a></li>
                        <li><a style="margin-left:0;" class="" href="textinput.html#content">TextInput</a></li>
                        <li><a style="margin-left:0;" class="" href="touchablehighlight.html#content">TouchableHighlight</a></li>
                        <li><a style="margin-left:0;" class="" href="touchableopacity.html#content">TouchableOpacity</a></li>
                        <li><a style="margin-left:0;" class="" href="touchablewithoutfeedback.html#content">TouchableWithoutFeedback</a></li>
                        <li><a style="margin-left:0;" class="" href="view.html#content">View</a></li>
                        <li><a style="margin-left:0;" class="" href="webview.html#content">WebView</a></li>
                    </ul>
                </div>
                <div class="nav-docs-section">
                    <h3>apis</h3>
                    <ul>
                        <li><a style="margin-left:0;" class="" href="alertios.html#content">AlertIOS</a></li>
                        <li><a style="margin-left:0;" class="" href="appregistry.html#content">AppRegistry</a></li>
                        <li><a style="margin-left:0;" class="" href="appstateios.html#content">AppStateIOS</a></li>
                        <li><a style="margin-left:0;" class="" href="asyncstorage.html#content">AsyncStorage</a></li>
                        <li><a style="margin-left:0;" class="" href="cameraroll.html#content">CameraRoll</a></li>
                        <li><a style="margin-left:0;" class="" href="interactionmanager.html#content">InteractionManager</a></li>
                        <li><a style="margin-left:0;" class="" href="layoutanimation.html#content">LayoutAnimation</a></li>
                        <li><a style="margin-left:0;" class="" href="linkingios.html#content">LinkingIOS</a></li>
                        <li><a style="margin-left:0;" class="" href="netinfo.html#content">NetInfo</a></li>
                        <li><a style="margin-left:0;" class="" href="panresponder.html#content">PanResponder</a></li>
                        <li><a style="margin-left:0;" class="" href="pixelratio.html#content">PixelRatio</a></li>
                        <li><a style="margin-left:0;" class="" href="pushnotificationios.html#content">PushNotificationIOS</a></li>
                        <li><a style="margin-left:0;" class="" href="statusbarios.html#content">StatusBarIOS</a></li>
                        <li><a style="margin-left:0;" class="" href="stylesheet.html#content">StyleSheet</a></li>
                        <li><a style="margin-left:0;" class="" href="vibrationios.html#content">VibrationIOS</a></li>
                    </ul>
                </div>
                <div class="nav-docs-section">
                    <h3>Polyfills</h3>
                    <ul>
                        <li><a style="margin-left:0;" class="" href="flexbox.html#content">Flexbox</a></li>
                        <li><a style="margin-left:0;" class="" href="geolocation.html#content">Geolocation</a></li>
                        <li><a style="margin-left:0;" class="" href="network.html#content">Network</a></li>
                        <li><a style="margin-left:0;" class="" href="timers.html#content">Timers</a></li>
                    </ul>
                </div>
            </div>
            <div class="inner-content">
                <a id="content"></a>
                <h1>Integration with Existing App</h1>
                <div>
                    <p>Since React makes no assumptions about the rest of your technology stack – it’s commonly noted as simply the <code>V</code> in <code>MVC</code> – it’s easily embeddable within an existing non-React Native app. In fact, it integrates with other best practice community tools like <a href="http://cocoapods.org/" target="_blank">CocoaPods</a>.</p>
                    <h2><a class="anchor" name="requirements"></a>Requirements <a class="hash-link" href="#requirements">#</a></h2>
                    <ul>
                        <li><a href="http://cocoapods.org/" target="_blank">CocoaPods</a> – <code>gem install cocoapods</code></li>
                        <li><a href="http://nodejs.org" target="_blank">Node.js</a> – <code>brew install node</code></li>
                    </ul>
                    <h2><a class="anchor" name="install-react-native-using-cocoapods"></a>Install React Native Using CocoaPods <a class="hash-link" href="#install-react-native-using-cocoapods">#</a></h2>
                    <p><a href="http://cocoapods.org/" target="_blank">CocoaPods</a> is a package management tool for iOS/Mac development. We need to use it to download React Native. If you haven&#x27;t install CocoaPods yet, checkout <a href="http://guides.cocoapods.org/using/getting-started.html" target="_blank">this tutorial</a>.</p>
                    <p>When you are ready to work with CocoaPods, add the following line to <code>Podfile</code>. If you don&#x27;t have one, then create it under the root directory of your project.</p>
                    <div class="prism language-javascript">pod <span class="token string">&#x27;React&#x27;</span> pod <span class="token string">&#x27;React/RCTText&#x27;</span> # Add any subspecs you want to use <span class="token keyword">in</span> your project</div>
                    <p>Remember to install all subspecs you need. The <code>&lt;Text&gt;</code> element cannot be used without <code>pod &#x27;React/RCTText&#x27;</code>.</p>
                    <p>Then install your pods:</p>
                    <div class="prism language-javascript">$ pod install</div>
                    <h2><a class="anchor" name="create-your-react-native-app"></a>Create Your React Native App <a class="hash-link" href="#create-your-react-native-app">#</a></h2>
                    <p>There are two pieces you’ll need to set up:</p>
                    <ol>
                        <li>The root JavaScript file that will contain your actual React Native app and other components</li>
                        <li>Wrapper Objective-C code that will load up your script and create a <code>RCTRootView</code> to display and manage your React Native components</li>
                    </ol>
                    <p>First, create a directory for your app’s React code and create a simple <code>index.ios.js</code> file:</p>
                    <div class="prism language-javascript">$ mkdir ReactComponent $ touch ReactComponent<span class="token operator">/</span>index<span class="token punctuation">.</span>ios<span class="token punctuation">.</span>js</div>
                    <p>Copy &amp; paste following starter code for <code>index.ios.js</code> – it’s a barebones React Native app:</p>
                    <div class="prism language-javascript"><span class="token string">&#x27;use strict&#x27;</span><span class="token punctuation">;</span>

                        <span class="token keyword">var</span> React <span class="token operator">=</span> <span class="token function">require<span class="token punctuation">(</span></span><span class="token string">&#x27;react-native&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">var</span> <span class="token punctuation">{</span> Text
                        <span class="token punctuation">,</span> View
                        <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">;</span>

                        <span class="token keyword">var</span> styles <span class="token operator">=</span> React<span class="token punctuation">.</span>StyleSheet<span class="token punctuation">.</span><span class="token function">create<span class="token punctuation">(</span></span><span class="token punctuation">{</span> container
                        <span class="token punctuation">:</span> <span class="token punctuation">{</span> flex
                        <span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> backgroundColor
                        <span class="token punctuation">:</span> <span class="token string">&#x27;red&#x27;</span>
                        <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> class <span class="token class-name">SimpleApp</span> extends <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
                        <span class="token function">render<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> <span class="token punctuation">(</span> &lt;View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span><span class="token operator">&gt;</span> &lt;Text
                        <span class="token operator">&gt;</span>This is a simple application<span class="token punctuation">.</span>&lt;<span class="token operator">/</span>Text<span class="token operator">&gt;</span> &lt;
                        <span class="token operator">/</span>View<span class="token operator">&gt;</span>
                        <span class="token punctuation">)</span>
                        <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span> React

                        <span class="token punctuation">.</span>AppRegistry<span class="token punctuation">.</span><span class="token function">registerComponent<span class="token punctuation">(</span></span><span class="token string">&#x27;SimpleApp&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> SimpleApp<span class="token punctuation">)</span><span class="token punctuation">;</span></div>
                    <p><code>SimpleApp</code> will be your <strong>module name</strong>, which will be used later on.</p>
                    <h2><a class="anchor" name="add-container-view-to-your-app"></a>Add Container View To Your App <a class="hash-link" href="#add-container-view-to-your-app">#</a></h2>
                    <p>You should now add a container view for the React Native component. It can be any <code>UIView</code> in your app.</p>
                    <p><img src="../img/EmbeddedAppContainerViewExample.png" alt="Container view example"></p>
                    <p>However, let&#x27;s subclass <code>UIView</code> for the sake of clean code. Let&#x27;s name it <code>ReactView</code>. Open up <code>Yourproject.xcworkspace</code> and create a new class <code>ReactView</code> (You can name it whatever you like :)).</p>
                    <div class="prism language-javascript"><span class="token comment" spellcheck="true">// ReactView.h
</span> #import &lt;UIKit<span class="token operator">/</span>UIKit<span class="token punctuation">.</span>h<span class="token operator">&gt;</span> @interface <span class="token class-name">ReactView</span> <span class="token punctuation">:</span> UIView @end
                    </div>
                    <p>In a view controller that wants to manage this view, go ahead and add an outlet and wire it up:</p>
                    <div class="prism language-javascript"><span class="token comment" spellcheck="true">// ViewController.m
</span> @interface <span class="token class-name">ViewController</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> @property <span class="token punctuation">(</span>weak<span class="token punctuation">,</span> nonatomic<span class="token punctuation">)</span> IBOutlet ReactView <span class="token operator">*</span>reactView<span class="token punctuation">;</span> @end
                    </div>
                    <p>Here I disabled <strong>AutoLayout</strong> for simplicity. In real production world, you should turn on AutoLayout and setup constraints by yourself.</p>
                    <h2><a class="anchor" name="add-rctrootview-to-container-view"></a>Add RCTRootView To Container View <a class="hash-link" href="#add-rctrootview-to-container-view">#</a></h2>
                    <p>Ready for the most interesting part? Now we shall create the <code>RCTRootView</code>, where your React Native app lives.</p>
                    <p>In <code>ReactView.m</code>, we need to first initiate <code>RCTRootView</code> with the URI of your <code>index.ios.bundle</code>. <code>index.ios.bundle</code> will be created by packager and served by React Native server, which will be discussed later on.</p>
                    <div class="prism language-javascript">NSURL <span class="token operator">*</span>jsCodeLocation <span class="token operator">=</span> <span class="token punctuation">[</span>NSURL URLWithString<span class="token punctuation">:</span>@<span class="token string">&quot;http://localhost:8081/index.ios.bundle&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">
// For production use, this `NSURL` could instead point to a pre-bundled file on disk:
</span><span class="token comment" spellcheck="true">//
</span><span class="token comment" spellcheck="true">//   NSURL *jsCodeLocation = [[NSBundle mainBundle] URLForResource:@&quot;main&quot; withExtension:@&quot;jsbundle&quot;];
</span><span class="token comment" spellcheck="true">//
</span><span class="token comment" spellcheck="true">// To generate that file, run the curl command and add the output to your main Xcode build target:
</span><span class="token comment" spellcheck="true">//
</span><span class="token comment" spellcheck="true">//   curl http://localhost:8081/index.ios.bundle -o main.jsbundle
</span>RCTRootView <span class="token operator">*</span>rootView <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>RCTRootView alloc<span class="token punctuation">]</span> initWithBundleURL<span class="token punctuation">:</span>jsCodeLocation moduleName
                        <span class="token punctuation">:</span> @<span class="token string">&quot;SimpleApp&quot;</span> launchOptions
                        <span class="token punctuation">:</span>nil<span class="token punctuation">]</span><span class="token punctuation">;</span></div>
                    <p>Then add it as a subview of the <code>ReactView</code>.</p>
                    <div class="prism language-javascript"><span class="token punctuation">[</span>self addSubview<span class="token punctuation">:</span>rootView<span class="token punctuation">]</span><span class="token punctuation">;</span> rootView
                        <span class="token punctuation">.</span>frame <span class="token operator">=</span> self<span class="token punctuation">.</span>bounds<span class="token punctuation">;</span></div>
                    <h2><a class="anchor" name="start-development-server"></a>Start Development Server <a class="hash-link" href="#start-development-server">#</a></h2>
                    <p>In root directory, we need to start React Native development server.</p>
                    <div class="prism language-javascript"><span class="token punctuation">(</span>JS_DIR<span class="token operator">=</span>`pwd`<span class="token operator">/</span>ReactComponent<span class="token punctuation">;</span> cd Pods<span class="token operator">/</span>React<span class="token punctuation">;</span> npm run start <span class="token operator">--</span> <span class="token operator">--</span>root $JS_DIR<span class="token punctuation">)</span></div>
                    <p>This command will start up a React Native development server within our CocoaPods dependency to build our bundled script. The <code>--root</code> option indicates the root of your React Native apps – this will be our <code>ReactComponents</code> directory containing the single <code>index.ios.js</code> file. This running server will package up the <code>index.ios.bundle</code> file accessible via <code>http://localhost:8081/index.ios.bundle</code>.</p>
                    <h2><a class="anchor" name="compile-and-run"></a>Compile And Run <a class="hash-link" href="#compile-and-run">#</a></h2>
                    <p>Now compile and run your app. You shall now see your React Native app running inside of the <code>ReactView</code>.</p>
                    <p><img src="../img/EmbeddedAppExample.png" alt="Example"></p>
                    <p>Live reload works from the simulator, too! You’ve got a simple React component totally encapsulated behind an Objective-C <code>UIView</code> subclass.</p>
                    <h2><a class="anchor" name="conclusion"></a>Conclusion <a class="hash-link" href="#conclusion">#</a></h2>
                    <p>So under the hood, when <code>RCTRootView</code> is initialized, it will try to download, parse and run the bundle file from React Native development server. This means all you need to do is to implement your own container view or view controller for the <code>RCTRootView</code> – the <code>RCTRootView</code> ingests your bundled JS and renders your React components. Bravo!</p>
                    <p>You can checkout full source code of a sample application <a href="https://github.com/tjwudi/EmbededReactNativeExample" target="_blank">here</a>.</p>
                </div>
                <div class="docs-prevnext"><a class="docs-next" href="javascript-environment.html#content">Next →</a></div>
            </div>
        </section>
        <footer class="wrap">
            <div class="right">© 2015 Facebook Inc.</div>
        </footer>
    </div>
    <div id="fb-root"></div>
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-41298772-2', 'facebook.github.io');
        ga('send', 'pageview');

        ! function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (!d.getElementById(id)) {
                js = d.createElement(s);
                js.id = id;
                js.src = "https://platform.twitter.com/widgets.js";
                fjs.parentNode.insertBefore(js, fjs);
            }
        }(document, "script", "twitter-wjs");
    </script>
</body>

</html>